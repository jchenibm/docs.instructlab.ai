---
title: æ¨¡åž‹éƒ¨ç½²ä¸Žå¯¹è¯
description: å¦‚ä½•éƒ¨ç½²æ¨¡åž‹å¹¶ä¸Žä¹‹è¿›è¡Œå¯¹è¯çš„æ­¥éª¤è¯´æ˜Ž
logo: images/ilab_dog.png
---

# ðŸ´ éƒ¨ç½²æ¨¡åž‹

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éƒ¨ç½²æ¨¡åž‹ï¼š

```shell
ilab model serve
```

å¦‚éœ€éƒ¨ç½²éžé»˜è®¤æ¨¡åž‹ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```shell
ilab model serve --model-path models/granite-7b-instruct.GGUF
```

*æ¨¡åž‹æˆåŠŸéƒ¨ç½²çš„è¾“å‡ºç¤ºä¾‹*

```shell
(venv) $ ilab model serve
INFO 2024-03-02 02:21:11,352 lab.py:201 Using model 'models/ggml-merlinite-7b-lab-Q4_K_M.gguf' with -1 gpu-layers and 4096 max context size.
Starting server process
After application startup complete see http://127.0.0.1:8000/docs for API.
Press CTRL+C to shut down the server.
```

!!! note
    å¦‚æžœå¤šä¸ª `ilab` å®¢æˆ·ç«¯åŒæ—¶å°è¯•è¿žæŽ¥åˆ°åŒä¸€ä¸ª InstructLab æœåŠ¡å™¨ï¼Œç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯å°†æˆåŠŸè¿žæŽ¥åˆ°æœåŠ¡å™¨ï¼Œè€Œå…¶ä»–å®¢æˆ·ç«¯å°†å¯åŠ¨å„è‡ªçš„ä¸´æ—¶æœåŠ¡å™¨ã€‚è¿™å°†éœ€è¦ä¸»æœºä¸Šçš„é¢å¤–ç³»ç»Ÿèµ„æºã€‚

éƒ¨ç½²éžé»˜è®¤çš„ Safetensors æ¨¡åž‹ï¼ˆä¾‹å¦‚ granite-7b-labï¼‰ã€‚æ³¨æ„ï¼šæ­¤æ“ä½œéœ€è¦ GPU æ”¯æŒã€‚

a. é¦–å…ˆç¡®ä¿å·²å®‰è£… vllmï¼š

```shell
pip show vllm
```

b. å¦‚æžœæœªå®‰è£…ï¼Œè¯·è¿è¡Œï¼š

```shell
pip install vllm@git+https://github.com/opendatahub-io/vllm@2024.08.01
```

```shell
ilab model serve --model-path ~/.cache/instructlab/models/instructlab/granite-7b-lab
```

# ðŸ“£ ä¸Žæ¨¡åž‹å¯¹è¯ï¼ˆå¯é€‰ï¼‰

ç”±äºŽæ‚¨åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­å·²ç»éƒ¨ç½²äº†æ¨¡åž‹ï¼Œå› æ­¤éœ€è¦æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£å¹¶é‡æ–°æ¿€æ´» Python è™šæ‹ŸçŽ¯å¢ƒæ¥è¿è¡Œ `ilab model chat` å‘½ä»¤ï¼š

```shell
source venv/bin/activate
ilab model chat
```

å¦‚éœ€ä¸Žéžé»˜è®¤æ¨¡åž‹å¯¹è¯ï¼ˆä¾‹å¦‚ Mixtral-8x7B-Instruct-v0.1ï¼‰ï¼š

```shell
source venv/bin/activate
ilab model chat --model models/mixtral-8x7b-instruct-v0.1.Q4_K_M.gguf
```

è¯·æ³¨æ„ï¼Œä½¿ç”¨ `--model` å‚æ•°æ—¶è¦æ±‚çŽ°æœ‰æœåŠ¡å™¨å·²å…·å¤‡è¯¥æ¨¡åž‹ã€‚å¦‚æžœæ²¡æœ‰ï¼Œæ‚¨å¿…é¡»å…ˆé€€å‡ºæœåŠ¡å™¨ã€‚å¦‚æžœæŒ‡å®šç«¯å£ä¸Šæ²¡æœ‰è¿è¡ŒæœåŠ¡å™¨ï¼Œ`ilab model chat` ä¸­çš„ `--model` å‚æ•°å¯ä»¥è‡ªåŠ¨ä¸ºæ‚¨å¯åŠ¨ä¸€ä¸ªå¸¦æœ‰æŒ‡å®šæ¨¡åž‹çš„æœåŠ¡å™¨ã€‚

åœ¨å¼€å§‹å‘æ¨¡åž‹æ·»åŠ æ–°çš„æŠ€èƒ½å’ŒçŸ¥è¯†ä¹‹å‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¯¢é—®è¯¸å¦‚"åŠ æ‹¿å¤§çš„é¦–éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"è¿™æ ·çš„é—®é¢˜æ¥æµ‹è¯•å…¶åŸºç¡€æ€§èƒ½ã€‚

!!! note
    æ¨¡åž‹éœ€è¦ä½¿ç”¨ç”Ÿæˆçš„åˆæˆæ•°æ®è¿›è¡Œè®­ç»ƒåŽï¼Œæ‰èƒ½ä½¿ç”¨ä»»ä½•æ–°æ·»åŠ çš„æŠ€èƒ½æˆ–çŸ¥è¯†ã€‚


```shell
(venv) $ ilab model chat
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ system â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Welcome to InstructLab Chat w/ GGML-MERLINITE-7B-lab-Q4_K_M (type /h for help)                                                                                                                                                                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
>>> what is the capital of Canada                                                                                                                                                                                                 [S][default]
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ggml-merlinite-7b-lab-Q4_K_M â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ The capital city of Canada is Ottawa. It is located in the province of Ontario, on the southern banks of the Ottawa River in the eastern portion of southern Ontario. The city serves as the political center for Canada, as it is home to â”‚
â”‚ Parliament Hill, which houses the House of Commons, Senate, Supreme Court, and Cabinet of Canada. Ottawa has a rich history and cultural significance, making it an essential part of Canada's identity.                                   â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ elapsed 12.008 seconds â”€â•¯
```